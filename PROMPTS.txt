Below is an **updated and improved version** of your system requirements, now adjusted for **multi-barangay support** using **one database** and **one system**, while keeping all data **separated per barangay**.

---

# âœ… **Updated System Requirements for Multi-Barangay Setup (5 Barangays, One System, One Database)**

Your system will now support **multiple barangays** (5 barangays) while ensuring that **data does not mix** between them.

This requires **multi-tenant architecture (barangay-based separation)** within a **single database**.

---

# ğŸ›ï¸ **Multi-Barangay Architecture (Multi-Tenant System)**

The system will run as **one platform**, but each barangay will have its own:

* Residents
* Business records
* Permit applications
* Document requests
* Users (Admin/Staff)
* Reports
* Announcements
* Events

### âœ”ï¸ **Key Requirement: barangay_id column**

Every table that stores barangay-specific data must include:

```
barangay_id
```

Example:

```
residents
businesses
certificates
users
document_requests
business_permits
households
announcements
events
```

This ensures that **each barangay only sees their own data**.

---

# ğŸ‘¥ **User Roles per Barangay**

Each barangay has its own set of:

* **Barangay Admin**
* **Staff**
* **Residents**

A user from Barangay 1 **cannot** access data from Barangay 2â€“5.

### How to enforce it:

Each user record contains:

```
user.barangay_id
```

When the user logs in, the system filters all data by:

```
WHERE barangay_id = user.barangay_id
```

---

# ğŸ  **Resident Module (Per Barangay)**

Residents belong to one barangay via:

```
residents.barangay_id
```

Residents can only:

* Access their own barangay Sangguniang Center
* Request documents from their own barangay
* View announcements and events of their barangay only

---

# ğŸ¢ **Business Registry (Per Barangay)**

Businesses must include:

```
businesses.barangay_id
```

So each barangay manages **their own business permits**, separate from other barangays.

---

# ğŸ“„ **Document & Certificate Module (Per Barangay)**

Documents and certificates include:

```
document_requests.barangay_id
certificates.barangay_id
```

Each barangay issues its own:

* Certificate of Residency
* Indigency
* Business permits
* Clearances

No barangay can see documents from another barangay.

---

# ğŸ“Š **Reports Module (Per Barangay)**

Each barangay generates its own reports, filtered by:

```
WHERE barangay_id = user.barangay_id
```

### Resident Reports

Each barangay sees only:

* Residents belonging to that barangay
* Households inside that barangay

### Business Reports

Each barangay sees:

* Only their businesses
* Only their permits
* Their own expiring permits
* Their own statistics

### Certificate Reports

Each barangay sees:

* Certificates issued by them
* Requests coming to them

---

# ğŸ”” **Notifications (Per Barangay)**

Notifications must be scoped by barangay:

* Staff of Barangay 1 only receives notifications for Barangay 1 data.
* Barangay 2 staff cannot receive alerts about Barangay 3 residents.

---

# ğŸ“ˆ **Dashboard (Per Barangay)**

When a staff/admin logs in:

They see **only the counts and analytics for their barangay**, such as:

* Number of residents
* Number of businesses
* Pending requests
* Expiring permits
* Recent activity logs

---

# ğŸ—„ï¸ **Database Architecture (Single DB, Multi-Barangay)**

ğŸŸ¦ **One database**
ğŸŸ¨ **Many tables**
â¤ï¸ **Every table linked to barangay_id**

Example table structure:

### residents

| id | name | birthdate | barangay_id |

### businesses

| id | business_name | owner | barangay_id |

### users

| id | username | role | barangay_id |

### document_requests

| id | resident_id | type | barangay_id |

### business_permits

| id | business_id | permit_no | barangay_id |

This ensures **perfect data isolation** inside a shared system.

---

# ğŸ›¡ï¸ **Security Rule: Data Filtering**

Every CRUD operation must include:

```
WHERE barangay_id = current_user.barangay_id
```

This prevents cross-barangay data access.

---

# ğŸ§© **Optional but Recommended: Super Admin**

A **super admin** role can be added who:

* Can see all barangays' data
* Can manage barangays
* Can generate system-wide reports

Barangay staff **cannot** do this.

---

# ğŸ¯ **Summary of Multi-Barangay Support**

To support 5 barangays using 1 system and 1 database:

### âœ” Add `barangay_id` to all major tables

### âœ” Filter all views/controllers by `current_user.barangay_id`

### âœ” Each barangay sees only **their own data**

### âœ” Shared system, isolated data

### âœ” Super admin (optional) can see all barangays
